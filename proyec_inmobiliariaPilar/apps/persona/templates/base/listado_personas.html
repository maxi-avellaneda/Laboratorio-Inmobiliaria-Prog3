{% extends "base/base.html" %}

{% load static %}

{% block contenido %}

<style>

    div#addPropiedades{
        text-align: center;
        margin-bottom: 2em;
    }

    div#addPropiedades button{
        margin-top: 2px;
        width: 20em;
    }

    div#addPropiedades button a{
        color: #ffffff;
    }




</style>

<div class="container">

    <h1 class="font-weight-bold text-dark text-center">LISTADO DE CLIENTES</h1>

{% if perms.persona.add_persona %}
<div id="addPropiedades">
    <button class="btn btn-primary btn-lg"><a href="{% url 'nueva_persona_juridica' %}">NUEVO CLIENTE JURIDICO</a></button>
    <button class="btn btn-primary btn-lg"><a href="{% url 'nueva_persona_fisica' %}">NUEVO CLIENTE FISICO</a></button>
</div>
{% endif %}

<div class="row">

    <div class="col-sm-2" style="background-color: #44C662; border: 1px solid black;">

        <p style="text-align: center; background-color:grey; color: white; width: 100%; border: 1px solid black;">Filtrar Personas</p>

        <form action="" method="POST">
            {% csrf_token %}
            

            {% for field in form %} 
                <div class="form-group row">
                    <label for="{{field.id_for_label}}" style="color: #fff;">{{field.label}}</label>
                        {{field}}
                        {{field.errors}}
                </div>
            {% endfor %}
        
            <input type="submit" value="BUSCAR">
        
        </form>

    </div>

    <div class="col-sm-10">

        <table class="table-bordered" style="width: 100%;">
            <thead class="thead-dark" style="background-color: black;">
            <tr style="color: blanchedalmond; text-align: center;">
                <th scope="col">ID</th>
                <th scope="col">NOMBRE</th>
                <th scope="col">CUIL/CUIT</th>
                <th scope="col">TIPO CLIENTE</th>
                <th scope="col">OPCIONES</th>
            </tr>
            </thead>
            <tbody>
            {% for p in personas %}
            <tr>
                <th scope="row">{{p.id}}</th>
                <td>{{p.personafisica.apellido}} {{p.personafisica.nombre}}{{p.personajuridica.razon_social}}</td>
                <td>{{p.personafisica.cuil}}{{p.personajuridica.cuit}}</td>
                <td>{{p.desc_per}}</td>
                <td>
        
                    {% if perms.persona.change_persona %}
                    <button><a href="{% url 'modificar_persona' p.id %}">Modificar</a></button> 
                    {% endif %}
        
                    {% if perms.persona.delete_persona %}
                    <button><a href="{% url 'confirmar_persona' p.id %}">Eliminar</a></button>
                    {% endif %}
                    <button><a href="{% url 'mostrar_persona' p.id %}">Detalles</a></button>
        
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>

    </div>


</div>

</div>










</div>



{% endblock %}
